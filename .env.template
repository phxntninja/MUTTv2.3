# =====================================================================
# MUTT v2.3 Environment Variables Template
# =====================================================================
# Copy this file to .env and fill in your actual values
# Usage: cp .env.template .env
# =====================================================================

# =====================================================================
# INGESTOR SERVICE
# =====================================================================
INGESTOR_HOST=0.0.0.0
INGESTOR_PORT=8080
INGESTOR_WORKERS=4

# =====================================================================
# ALERTER SERVICE
# =====================================================================
ALERTER_HEALTH_PORT=8081
ALERTER_METRICS_PORT=9091
POD_NAME=alerter-001

# =====================================================================
# MOOG FORWARDER SERVICE
# =====================================================================
MOOG_FORWARDER_HEALTH_PORT=8082
MOOG_FORWARDER_METRICS_PORT=9092
MOOG_WEBHOOK_URL=https://your-moog-instance.com/webhook
MOOG_TIMEOUT=10

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60
RATE_LIMIT_KEY=mutt:rate_limit:moog

# Retry Config
RETRY_MAX_ATTEMPTS=5
RETRY_INITIAL_DELAY=1
RETRY_MAX_DELAY=60
RETRY_BACKOFF_MULTIPLIER=2

# =====================================================================
# WEB UI SERVICE
# =====================================================================
WEBUI_HOST=0.0.0.0
WEBUI_PORT=8090
WEBUI_WORKERS=2
METRICS_CACHE_TTL=5

# =====================================================================
# REDIS CONFIGURATION
# =====================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_TLS_ENABLED=false
REDIS_TLS_CA_CERT=/path/to/ca.crt
REDIS_TLS_CLIENT_CERT=/path/to/client.crt
REDIS_TLS_CLIENT_KEY=/path/to/client.key
REDIS_SOCKET_KEEPALIVE=true
REDIS_HEALTH_CHECK_INTERVAL=30

# Queue Names
INGEST_QUEUE_NAME=mutt:ingest_queue
ALERT_QUEUE_NAME=mutt:alert_queue
PROCESSING_LIST_PREFIX_ALERTER=mutt:processing:alerter
PROCESSING_LIST_PREFIX_MOOG=mutt:processing:moog
DLQ_NAME=mutt:dlq:moog
UNHANDLED_KEY_PREFIX=mutt:unhandled

# Queue Config
INGEST_QUEUE_CAP=1000000
BRPOPLPUSH_TIMEOUT=5

# =====================================================================
# POSTGRESQL CONFIGURATION
# =====================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=mutt
POSTGRES_USER=mutt_user
POSTGRES_PASSWORD=CHANGE_ME_SECURE_PASSWORD
POSTGRES_TLS_ENABLED=false
POSTGRES_TLS_CA_CERT=/path/to/ca.crt
POSTGRES_TLS_CLIENT_CERT=/path/to/client.crt
POSTGRES_TLS_CLIENT_KEY=/path/to/client.key

# Connection Pooling
POSTGRES_POOL_MIN=2
POSTGRES_POOL_MAX=10

# =====================================================================
# VAULT CONFIGURATION
# =====================================================================
VAULT_ADDR=https://vault.yourdomain.com:8200
VAULT_TOKEN=your-vault-token-here
VAULT_MOUNT_PATH=secret
VAULT_SECRET_PATH=mutt/prod
VAULT_TOKEN_RENEW_THRESHOLD=86400
VAULT_TLS_CA_CERT=/path/to/vault-ca.crt
VAULT_TLS_VERIFY=true

# =====================================================================
# PROCESSING CONFIGURATION
# =====================================================================
RULE_CACHE_TTL=300
JANITOR_INTERVAL=60
HEARTBEAT_INTERVAL=10
HEARTBEAT_EXPIRY=30
POISON_MESSAGE_MAX_RETRIES=3

# =====================================================================
# LOGGING
# =====================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json

# =====================================================================
# MONITORING
# =====================================================================
METRICS_PORT=9090
PROMETHEUS_ENABLED=true

# =====================================================================
# SECURITY
# =====================================================================
# These should be stored in Vault in production
# Listed here for reference only
# INGEST_API_KEY=stored-in-vault
# WEBUI_API_KEY=stored-in-vault
# POSTGRES_PASSWORD=stored-in-vault
# MOOG_API_KEY=stored-in-vault
